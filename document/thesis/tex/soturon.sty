
% \usepackage{comment}
\usepackage{url}
\usepackage{amsmath}
\usepackage{enumerate}
\usepackage[dvipdfmx]{color}
\usepackage{listings,jlisting}
\usepackage{ajmacros}
\usepackage{amsmath}
\usepackage{here}
\usepackage{multirow}

\lstset{%
 language={TeX},
 backgroundcolor={\color[gray]{.98}},%
 basicstyle={\small},%
 identifierstyle={\small},%
 commentstyle={\small\itshape},%
 keywordstyle={\small\bfseries},%
 ndkeywordstyle={\small},%
 stringstyle={\small\ttfamily},
 frame={tb},
 breaklines=true,
 columns=[l]{fullflexible},%
 numbers=left,%
 xrightmargin=0zw,%
 xleftmargin=3zw,%
 numberstyle={\scriptsize},%
 stepnumber=1,
 numbersep=1zw,%
 lineskip=-0.5ex%
}
\renewcommand{\lstlistingname}{図} %ソースコードも図として貼る
% listingsの番号をfigureに変更
\def\fnum@lstlisting{%
  \lstlistingname
  \ifx\lst@@caption\@empty\else~\thefigure\fi}
% \lstset{%
%   % language={C},%
%   % basicstyle={\small},%
%   % identifierstyle={\small},%
%   % commentstyle={\small\itshape\color[rgb]{0,0.5,0}},%
%   % keywordstyle={\small\bfseries\color[rgb]{0,0,1}},%
%   % ndkeywordstyle={\small},%
%   % stringstyle={\small\ttfamily\color[rgb]{1,0,1}},%
%   frame=single,%
%   breaklines=true,%
%   columns=[l]{fullflexible},%
%   % numbers=left,%
%   xrightmargin=0zw,%
%   xleftmargin=3zw,%
%   numberstyle={\scriptsize},%
%   stepnumber=1,%
%   numbersep=1zw,%
%   lineskip=-0.5ex,%
%   keepspaces=true,%
%   captionpos=b,%
%   basicstyle=\ttfamily
% }

\def\figuresize{0.8\textwidth}
\def\figureheight{0.8\textheight}

% \renewcommand{\bibname}{参考文献}    % bibTexの章を書き換え
\newcommand*{\refdate}[1]{#1参照}   % 日付の参照

% ======= マクロ =======
% 図入力簡易化マクロ
\newcommand{\myfigure}[3]{%
  \refstepcounter{lstlisting}
  \begin{figure}[H]%
    \centering%
    \includegraphics[width=\figuresize]{#1}%
    \caption{#2}%
    \label{#3}%
  \end{figure}%
}
\newcommand{\myfigureh}[3]{%
  \refstepcounter{lstlisting}
  \begin{figure}[H]%
    \centering%
    \includegraphics[height=\figureheight]{#1}%
    \caption{#2}%
    \label{#3}%
  \end{figure}%
}
\newcommand{\myfigurem}[3]{%
  \refstepcounter{lstlisting}
  \begin{figure}[H]%
    \centering%
    \includegraphics[width=0.6\hsize]{#1}%
    \caption{#2}%
    \label{#3}%
  \end{figure}%
}
\newcommand{\myfigures}[4]{%
  \refstepcounter{lstlisting}
  \begin{figure}[H]%
    \centering%
    \includegraphics[width=0.#4\hsize]{#1}%
    \caption{#2}%
    \label{#3}%
  \end{figure}%
}
% ソースコード入力簡易化マクロ
\newcommand{\mylistingD}[3]{
  \begin{figure}[H]
    \lstinputlisting{#1}
    \caption{#2}
    \label{#3}
  \end{figure}
}
% 上は非推奨下を使う
\newcommand{\mylisting}[3]{
  \begin{center}
    \vspace{8pt}
    \refstepcounter{figure}
    \lstset{
      frame=single
    }
    \lstinputlisting[caption=#2, label=#3]{#1}
  \end{center}
  
}
\newcommand{\mylistingnum}[3]{
  \begin{center}
    \refstepcounter{figure}
    \vspace{8pt}
    \lstset{
      numbers=left,
      frame=single
    }
    \lstinputlisting[caption=#2, label=#3]{#1}
  \end{center}
}
%shadowbox用
\newcommand{\mylistingsd}[3]{
  \begin{center}
    \vspace{8pt}
    \refstepcounter{figure}
    \lstset{
      frame=shadowbox
    }
    \lstinputlisting[caption=#2, label=#3]{#1}
  \end{center}
}
\newcommand{\mylistingsdnum}[3]{
  \begin{center}
    \refstepcounter{figure}
    \vspace{8pt}
    \lstset{
      numbers=left,
      frame=shadowbox
    }
    \lstinputlisting[caption=#2, label=#3]{#1}
  \end{center}
}
% 参照(図)
\newcommand{\reff}[1]{
  図\ref{#1}
}
% 参照(表)
\newcommand{\reft}[1]{
  表\ref{#1}
}
% 参照(式)
\newcommand{\refe}[1]{
  (\ref{#1})
}