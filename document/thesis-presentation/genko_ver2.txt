これから
山口賢一研究室から
藤本が

＜タイトル＞

について発表させていただきます．
=========================
直前の二人と同様に「」と言う課題を解決するため，
図示しているシステムを構築します．

開発を3人で分担する中で，
私は行動表示と通知を行うWebアプリケーションを担当します．

=========================
担当部分に関わりがある背景について説明します．

1つ目，農業従事者は基本的に夜間，害獣が何時侵入したか気づくのは困難ということです
そのため日中と違い，農業従事者が直接追い払うことが難しいです．

2つ目，痕跡のみでは侵入時の行動経路がわからないことです．
基本的に獣害対策として侵入防止柵などがあるが，
被害が発生してしまった時，それらの柵に穴があるなど，対策に不備があると言うことになります．
そういった時に不備の該当箇所を探すことは難しいです．

そういった問題を解決するために，
侵入に対する通知と
侵入発生後の対策補助として解析結果からの行動表示
を目標とします．

=========================
通知と行動表示を実現するために図に示すようなサーバ構成を考えました．

想定されるデータとアクセスの流れに沿って説明します．
まず，畑に設置したセンサからのデータがゲートウェイを介してクラウドサーバにきます．
それをリバースプロキシを中継して，データベースに一時保存します．
その後データ解析を行い，解析データもデータベースに保存します．
解析後のデータを用いて通知サーバや行動表示アプリによって農業従事者に通知や行動表示を提供を行います．

構成要素の実現方法としては，
通知サーバ
行動表示アプリ
はNode.jsを用いてサーバ構築をし，
通知はWebPush，
行動表示はLeaflet.jsを利用します．

リバースプロキシ，
データベース

を用います．

****
Node.jsである理由
・

MySQLである理由
・今回ではそこまで比重を置いていない
・クラウドサーバ内で複数からアクセスするためSQLiteみたいな組み込み型ではなくクライアントサーバ型であるMySQLを用いた．

=========================
まず，リバースプロキシについてです．

リバースプロキシは外からのアクセスの種類によって内部のどこと通信するかを制御する機能を持ったサーバのことです．
リバースプロキシが持つ利点はいろいろあるのですが，
ここでは，
通知サーバ
行動表示アプリ，
データ解析といった
複数機能を
一つのクラウドサーバで実現するために用います．

そこで選んだNginxは
汎用的なWebサーバとして普及しており，
プロキシサーバとしてもよく利用されています．

=========================
通知サーバでは
即時性，
気づきやすさ
が重要になります．

そこでスマホやパソコンで利用されるPush通知を用いることにしました．(図示)

ただ，Push通知を普通実現するには
iOSやアンドロイドに合わせたアプリケーションを作る必要がありコストが高いです．

そこでWebPushを採用しました．
WebPushはWebアプリからブラウザを用いて通知を行うものであり，
主要なブラウザでは基本的に対応しています．
こうした，機種に依存しづらい性質により，幅広い対応を実現できると考えました．


=========================
続きまして，Webアプリでは
行動の分かりやすさが重要です．

ここではLeaflet.jsを採用しました．

leaflet.jsはこの図のように
ピンや円，ポップアップや任意の図形を地図に投影できます．
これを用いることで，視覚的に分かりやすい表示をできると考えました．

=========================
そして，それぞれのサーバを用いた検証実験結果がこちらです．

Push通知につきましては，
PCとスマートフォンでSafariとGoogle Chromeを用いて確認しました．
アプリを開いていない状態から通知を行うバックグラウンド通知が
PC，スマートフォンの両方で確認できました．


行動経路の地図表示につきましては，
図のように
センサノードをピン
移動経路を折線として
表示できることを確認しました．

=========================
最後にまとめとしては，
複数のブラウザと端末でWebPushによる通知の実現
地図上に行動履歴を表示することを確認できました．

今後の展望としては，
データ解析に連動して，Push通知を発生させることで利便性が向上できると考えています．

以上，ご静聴ありがとうございます．

=========================


質問．

山口先生
行動表示の時に3次元的な高さなどを反映した表示をすることを検討してみてはお願いします．


市川先生
現段階でどこまで連携できますか．


